<div class="container-fluid editor"><!-- mode="full" -->

  <jp-editor-header
    [title]="title$ | async"
    [status]="status$ | async"

    [me]="participantSessionMe$ | async"
    [participants]="participantSessionsRecent$ | async"
    [participantsPast]="participantSessionsPast$ | async"

    [headers]="headers"

    [commentAction]="commentsAction"
    [comment]="selectedComment$ | async"
    [commentSelection]="newCommentSelection"

    (menuActionEvent)="onMenuAction($event)"
    (changeTitle)="onChangeTitle($event)">
    </jp-editor-header>

  <jp-editor-toolbar [styles]="selectionStyles$ | async" (styleEvent)="editStyle($event)" (linkEvent)="showModalLink()" ></jp-editor-toolbar>

  <div class="row">

    <div class="floating-panel-left col-md-2 col-lg-3 col-sm-1 col-xs-1 visible-md-block visible-lg-block">
        <div class="panel-frame">
          <jp-editor-outline [headers]="headers$ | async"></jp-editor-outline>
        </div>
    </div>

    <div class="col-md-offset-2 col-lg-offset-3 col-sm-offset-1 col-md-8 col-lg-6 col-sm-10 col-xs-10" id="editor-panel" class="editor-panel">
        <link-modal *ngIf="visibleLinkModal" [at]="caretPos$ | async" [link]="inputLinkModal" (modalEvent)="editLink($event)"></link-modal>
        <link-menu *ngIf="visibleLinkContextMenu" [at]="caretPos$ | async" [link]="selectionStyles.link" (actionEvent)="linkContextAction($event)"></link-menu>
        <selection-menu *ngIf="visibleContextMenu$ | async" [at]="caretPos$ | async" (actionEvent)="contextAction($event)"></selection-menu>
        <jp-editor-canvas [showCover]="showCanvasCover" (coverEvent)="onCoverEvent($event)"></jp-editor-canvas>
    </div>

    <div class="floating-panel-right col-md-2 col-lg-3 col-sm-1 col-xs-1 visible-md-block visible-lg-block">

      <jp-editor-participants
          *ngIf="rightPanelContent == 'contributors'"
          [me]="participantSessionMe$ | async"
          [participantsRecent]="participantSessionsRecent$ | async"
          [participantsPast]="participantSessionsPast$ | async"
          (diffHighlightEvent)="onSwitchDiffHighlight($event)">
      </jp-editor-participants>

      <jp-editor-comments
          *ngIf="rightPanelContent == 'comments'"
          [action]="commentsAction"
          [me]="participantSessionMe$ | async"
          [comment]="selectedComment$ | async"
          [selection]="newCommentSelection"
          (commentEvent)="onCommentEvent($event)">
        </jp-editor-comments>

    </div>

  </div>
</div>
